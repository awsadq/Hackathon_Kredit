<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç ‚Äì KreditFast</title>
  <link rel="stylesheet" href="css/dashboard.css" />
</head>
<body>

  <header class="dashboard-header">
    <div class="logo">
      <img src="assets/logo.png" alt="KreditFast" />
      <h1>KreditFast</h1>
    </div>
    <div class="top-controls">
      <div class="lang-switch">
        <button onclick="setLang('ru')">–†–£</button>
        <button onclick="setLang('kg')">KG</button>
      </div>
      <button onclick="logout()" class="logout-btn">–í—ã–π—Ç–∏</button>
    </div>
  </header>

  <main class="dashboard container">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="userName">–ó–∞–≥—Ä—É–∑–∫–∞...</span> üë§</h1>

    <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
    <section class="card">
      <h2>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h2>
      <ul>
        <li><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> <span id="userPhone">–ó–∞–≥—Ä—É–∑–∫–∞...</span></li>
        <li><strong>Email:</strong> <span id="userEmail">–ó–∞–≥—Ä—É–∑–∫–∞...</span></li>
        <li><strong>–°–∫–æ—Ä–∏–Ω–≥:</strong> <span id="userScore">–ó–∞–≥—Ä—É–∑–∫–∞...</span></li>
        <li><strong>–°—Ç–∞—Ç—É—Å:</strong> <span id="userStatus">–ó–∞–≥—Ä—É–∑–∫–∞...</span></li>
      </ul>
    </section>

    <!-- –ê–∫—Ç–∏–≤–Ω—ã–π –∫—Ä–µ–¥–∏—Ç -->
    <section class="card">
      <h2>–í–∞—à –∞–∫—Ç–∏–≤–Ω—ã–π –∫—Ä–µ–¥–∏—Ç</h2>
      <div id="activeLoan"></div>
      <a href="early-pay.html" class="btn">üí∞ –î–æ—Å—Ä–æ—á–Ω–æ–µ –ø–æ–≥–∞—à–µ–Ω–∏–µ</a>
    </section>

    <!-- –ò—Å—Ç–æ—Ä–∏—è –∫—Ä–µ–¥–∏—Ç–æ–≤ -->
    <section class="card">
      <h2>–ò—Å—Ç–æ—Ä–∏—è –∫—Ä–µ–¥–∏—Ç–æ–≤</h2>
      <table>
        <thead>
          <tr>
            <th>–î–∞—Ç–∞</th>
            <th>–°—É–º–º–∞</th>
            <th>–°—Ä–æ–∫</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
          </tr>
        </thead>
        <tbody id="loanHistory">
          <tr><td colspan="4">–ó–∞–≥—Ä—É–∑–∫–∞...</td></tr>
        </tbody>
      </table>
    </section>

    <!-- –°–∫–æ—Ä–∏–Ω–≥ -->
    <section class="card">
      <h2>–í–∞—à —Å–∫–æ—Ä–∏–Ω–≥</h2>
      <div id="scoringBox"></div>
    </section>

    <!-- –ü–æ—Ä—É—á–∏—Ç–µ–ª–∏ -->
    <section class="card">
      <h2>–ü–æ—Ä—É—á–∏—Ç–µ–ª–∏</h2>
      <form id="guarantorForm">
        <input type="text" id="guarantorName" placeholder="–ò–º—è –ø–æ—Ä—É—á–∏—Ç–µ–ª—è" required />
        <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –ø–æ—Ä—É—á–∏—Ç–µ–ª—è</button>
      </form>
      <div id="guarantorMessage"></div>
      <ul id="guarantorList"></ul>
    </section>

    <!-- –ë–µ—Å–ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–π –∫—Ä–µ–¥–∏—Ç -->
    <section class="card">
      <h2>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</h2>
      <div id="noInterestOffer"></div>
      <div id="noInterestStatus"></div>
    </section>

    <!-- –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ -->
    <section class="card">
      <h2>–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ</h2>
      <div id="reminderBox"></div>
    </section>
  </main>

  <!-- –û—Å–Ω–æ–≤–Ω—ã–µ JS -->
  <script src="js/app.js"></script>
  <script src="js/scoring.js"></script>
  <script src="js/guarantor.js"></script>
  <script src="js/no-interest.js"></script>
  <script src="js/reminder.js"></script>

  <script>
    const user = {
      fullName: "–ê—Å–∞–Ω–æ–≤ –ê—Å–∞–Ω",
      phone: "+996700123456",
      email: "asan@gmail.com",
      score: 7,
      status: "üü° –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫",
      activeLoan: {
        amount: "20 000",
        term: "6 –º–µ—Å—è—Ü–µ–≤",
        rate: 18,
        remaining: "15 000",
        dueDate: "2025-05-15",
        id: "loan001"
      },
      history: [
        { date: "01.02.2025", amount: "10 000", term: "3 –º–µ—Å", status: "–ü–æ–≥–∞—à–µ–Ω" },
        { date: "20.03.2025", amount: "5 000", term: "14 –¥–Ω–µ–π", status: "–ü—Ä–æ—Å—Ä–æ—á–µ–Ω" }
      ]
    };

    // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    document.getElementById("userName").textContent = user.fullName;
    document.getElementById("userPhone").textContent = user.phone;
    document.getElementById("userEmail").textContent = user.email;
    document.getElementById("userScore").textContent = user.score + "/10";
    document.getElementById("userStatus").textContent = user.status;

    // –ê–∫—Ç–∏–≤–Ω—ã–π –∫—Ä–µ–¥–∏—Ç
    const loan = user.activeLoan;
    const loanBox = document.getElementById("activeLoan");
    if (loanBox && loan) {
      loanBox.innerHTML = `
        <p>–°—É–º–º–∞: <strong>${loan.amount} —Å–æ–º</strong></p>
        <p>–û—Å—Ç–∞—Ç–æ–∫: <strong>${loan.remaining} —Å–æ–º</strong></p>
        <p>–°—Ç–∞–≤–∫–∞: <strong>${loan.rate}%</strong></p>
        <p>–°—Ä–æ–∫: <strong>${loan.term}</strong></p>
        <p>–î–æ –≤—ã–ø–ª–∞—Ç—ã: <strong>${loan.dueDate}</strong></p>
      `;
    }

    // –ò—Å—Ç–æ—Ä–∏—è
    const tbody = document.getElementById("loanHistory");
    tbody.innerHTML = "";
    user.history.forEach(item => {
      const row = document.createElement("tr");
      row.innerHTML = `<td>${item.date}</td><td>${item.amount}</td><td>${item.term}</td><td>${item.status}</td>`;
      tbody.appendChild(row);
    });

    // –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
    const reminderBox = document.getElementById("reminderBox");
    const dueDate = new Date(user.activeLoan.dueDate);
    const today = new Date();
    const diff = Math.ceil((dueDate - today) / (1000 * 60 * 60 * 24));
    reminderBox.textContent = diff <= 3
      ? `‚ö†Ô∏è –î–æ –ø–ª–∞—Ç–µ–∂–∞ –æ—Å—Ç–∞–ª–æ—Å—å ${diff} –¥–Ω—è(–µ–π).`
      : "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π.";

    // –í—ã—Ö–æ–¥
    function logout() {
      alert("–í—ã –≤—ã—à–ª–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞");
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
